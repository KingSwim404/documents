# [项目名称] - 项目约束和开发规范

> **模板使用说明**
> 
> 本文档是项目约束模板，使用前请：
> 1. 替换所有 `[占位符]` 为实际项目信息
> 2. 根据项目技术栈调整技术约束
> 3. 删除不适用的约束条件
> 4. 删除本使用说明部分
> 
> **必需替换的占位符**：
> - `[项目名称]` → 你的项目名称
> - `[项目英文名]` → 项目英文标识符
> - `[技术栈]` → 实际技术栈
> - `[开发端口]` → 开发服务器端口
> - `[部署域名]` → 生产环境域名
> - `[构建目标]` → 构建类型（SPA/SSG/SSR等）

## 文档目的

本文档记录 **[项目名称]** 项目开发过程中必须遵守的技术约束、开发规范和环境限制。该项目基于 [技术栈] 技术栈，部署到 [部署域名] 域名，具有特定的构建和部署要求。

## 📋 项目基本信息

- **项目名称**: [项目名称]
- **项目标识**: [项目英文名]
- **技术栈**: [技术栈]
- **开发端口**: [开发端口]
- **部署域名**: [部署域名]
- **构建目标**: [构建目标]
- **主要功能**: [项目主要功能描述]

## 🔧 技术环境约束

### 项目重启前的清理工作（必须执行）

**清理旧项目文件：**
- **删除或备份失败的代码文件** - 避免文件混乱和冲突
- **清理混乱的目录结构** - 确保从干净状态开始
- **保留重要的文档和配置** - 如文档目录、版本控制配置等

**清理开发环境：**
- **停止所有正在运行的服务** - 执行进程清理命令
- **清理依赖和缓存** - 删除依赖包、构建产物、缓存文件
- **确认端口没有被占用** - 检查 [开发端口] 端口是否可用

**项目重启标准清理规则（严格执行）：**

**保留的文件/目录（仅保留以下项目）：**
- `docs/` 或 `documents/` - 项目文档
- `.git/` - Git版本控制
- `.gitignore` - Git忽略配置
- `README.md` - 项目说明（如果存在）
- 其他重要配置文件（根据项目需要）

**删除其他所有文件和目录** - 包括但不限于：
- 所有代码文件和目录（如 `src/`, `public/` 等）
- `package.json` 和 `package-lock.json`
- `node_modules/`
- 构建产物和缓存文件
- 临时文件和测试文件

### 开发环境管理约束

**服务管理约束：**
- **不要随便启动服务** - 只有在明确要求时才启动
- **启动前关闭之前的服务** - 执行进程清理，避免端口冲突
- **使用固定端口 [开发端口]** - 项目固定使用指定端口，避免端口号变化
- **有热更新时不要重启** - 现代构建工具有热更新功能，避免不必要的重启

**缓存管理约束：**
- **开发者工具中勾选"Bypass for network"** - 永久跳过缓存
- **优先使用无痕模式开发** - 避免任何缓存干扰
- **使用固定端口 [开发端口]** - 避免与其他项目缓存混淆
- **项目切换时检查并清理缓存** - 防止其他项目的缓存影响本项目

**依赖管理约束：**
- **清理依赖和缓存** - 删除 `node_modules/`、构建产物、缓存文件
- **定期清理缓存和重新安装依赖** - 预防依赖冲突问题
- **使用固定端口 [开发端口]** - 避免与其他项目缓存混淆
- **项目切换时检查并清理缓存** - 防止其他项目的缓存影响

## 🏗️ 构建和部署约束

### 构建产物约束

**构建产物严格约束：**
- **严格限制** - 只能包含 `index.html` 和 `assets/` 文件夹
- **根目录例外文件** - 根据项目需要保留必要文件（如 `manifest.json`、图标文件等）
- **assets 目录** - 其他所有资源（CSS、JS、图片、字体等）必须放在 `assets/` 目录下
- **代码分割** - 大型库必须分别打包，避免单文件过大

**构建配置要求：**
```javascript
// 示例：构建工具配置
export default defineConfig({
  base: '[部署路径]',
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
    rollupOptions: {
      output: {
        assetFileNames: 'assets/[name]-[hash][extname]',
        chunkFileNames: 'assets/[name]-[hash].js',
        entryFileNames: 'assets/[name]-[hash].js'
      }
    }
  }
});
```

### 源项目访问约束

> **定制说明**：如果项目涉及多个源项目或外部依赖，调整以下约束

**源项目管理：**
- **严格禁止修改** - 严禁修改外部源项目或依赖
- **只读访问** - 外部项目目录是临时参考目录，不会部署到生产环境
- **内容复制** - 可以读取、复制内容到项目中，但不能修改原始文件

## 🤖 AI协作约束

### AI助手工作约束

**基础协作原则：**
- **遵循AI工作约束文档** - 严格按照AI工作约束执行
- **获得明确授权** - 任何操作都需要明确的用户授权
- **质量优先于速度** - 确保代码质量，不追求开发速度
- **小步验证** - 每个功能完成后立即验证，避免累积问题

**技术实施约束：**
- **充分沟通，耐心倾听** - 理解需求后再开始实施
- **提供多个方案** - 给出不同的技术方案供选择
- **详细说明利弊** - 解释每个方案的优缺点
- **遵循项目技术栈** - 使用 [技术栈] 相关技术

### 代码质量约束

**代码开发标准：**
```typescript
// ✅ 推荐：类型安全的代码
interface ProjectConfig {
  name: string;
  port: number;
  baseUrl: string;
}

const config: ProjectConfig = {
  name: '[项目名称]',
  port: [开发端口],
  baseUrl: '[部署域名]'
};

// ❌ 避免：使用any类型
const config: any = {
  // 缺少类型约束
};
```

**错误处理要求：**
```typescript
// ✅ 推荐：完整的错误处理
async function fetchData() {
  try {
    const response = await api.getData();
    return response.data;
  } catch (error) {
    console.error('数据获取失败:', error);
    // 提供降级方案
    return getDefaultData();
  }
}
```

## 🌐 部署和服务器约束

### 部署环境要求

**[部署域名] 部署要求：**
- **目标域名**：[部署域名]
- **部署路径**：[具体部署路径]
- **服务器类型**：[服务器类型，如静态文件服务器、Node.js服务器等]
- **服务器根目录**：[服务器根目录路径]

**域名路由映射：**
> **定制说明**：根据实际部署架构调整路由配置

- **[部署域名]** → [实际服务器路径]
- **子路径处理**：[子路径的处理方式]
- **实现方式**：[通过什么方式实现路由，如Apache .htaccess、Nginx配置等]

**SEO配置要求：**
- **Canonical URL** 必须使用 `[部署域名]`
- **Meta标签** 必须包含正确的域名信息
- **Open Graph 标签** 必须包含完整URL
- **结构化数据** 必须使用正确域名

**构建产物要求：**
- **根目录文件**：`index.html`、必要的配置文件
- **assets目录**：所有其他资源必须在 `assets/` 下
- **内容目录**：[如果有内容文件，说明组织方式]

### 服务器配置

**服务器信息：**
> **定制说明**：根据实际服务器信息调整

- **服务器**：[服务器地址或标识]
- **部署目录**：[具体部署目录]
- **域名绑定**：[域名绑定配置]
- **访问方式**：[用户访问方式]

## 🔍 开发调试约束

### 调试和测试约束

**调试环境管理：**
```bash
# 检查端口占用
lsof -i :[开发端口]

# 清理进程（根据实际情况调整）
pkill -f node

# 清理缓存（根据技术栈调整）
rm -rf node_modules/
rm -rf dist/
rm -rf .cache/
```

**测试要求：**
- **功能测试** - 确保所有功能正常工作
- **兼容性测试** - 测试不同浏览器和设备
- **性能测试** - 检查加载速度和运行性能
- **部署测试** - 验证部署后的功能完整性

### 问题预防约束

**项目特定问题预防：**
- **缓存问题** - 开发时使用无痕模式或禁用缓存
- **端口 [开发端口] 占用问题** - 启动前执行进程清理
- **依赖冲突问题** - 定期清理依赖和重新安装
- **路径引用问题** - 使用相对路径，避免硬编码路径

## 📊 性能和优化约束

### 性能要求

**加载性能指标：**
- **首屏加载时间** < 3秒
- **完全加载时间** < 5秒
- **资源大小控制** - 单个JS文件 < 1MB
- **图片优化** - 使用现代图片格式，适当压缩

**运行时性能：**
- **内存使用** - 避免内存泄漏
- **CPU使用** - 避免长时间阻塞主线程
- **网络请求** - 合理控制请求数量和频率

### 代码优化要求

**代码分割策略：**
```javascript
// ✅ 推荐：按路由分割
const routes = [
  {
    path: '/',
    component: () => import('./pages/Home.vue')
  },
  {
    path: '/[功能路径]',
    component: () => import('./pages/[功能页面].vue')
  }
];

// ✅ 推荐：按功能分割
const [大型组件] = lazy(() => import('./components/[大型组件]'));
```

## 🔒 安全和合规约束

### 安全要求

**数据安全：**
- **敏感信息保护** - 不在代码中硬编码敏感信息
- **环境变量使用** - 使用环境变量管理配置
- **HTTPS要求** - 生产环境必须使用HTTPS
- **输入验证** - 对用户输入进行适当验证

**代码安全：**
```javascript
// ✅ 推荐：使用环境变量
const apiUrl = process.env.VITE_API_URL || 'https://api.your-domain.com';

// ❌ 避免：硬编码敏感信息
const apiKey = 'sk-1234567890abcdef'; // 不要这样做
```

### 合规要求

> **定制说明**：根据项目所在地区和行业调整合规要求

**法律合规：**
- **隐私政策** - 如果收集用户数据，提供隐私政策
- **Cookie政策** - 如果使用Cookie，提供相关说明
- **备案要求** - 根据部署地区的法律要求进行备案
- **内容合规** - 确保内容符合相关法律法规

## 📋 项目检查清单

### 开发阶段检查
- [ ] 项目信息已正确配置（名称、端口、域名等）
- [ ] 技术栈选择符合项目要求
- [ ] AI协作约束已建立并执行
- [ ] 代码质量符合项目标准
- [ ] 开发环境配置正确

### 构建阶段检查
- [ ] 构建配置符合约束要求
- [ ] 构建产物结构正确（index.html + assets/）
- [ ] 资源路径配置正确
- [ ] 代码分割策略已实施
- [ ] 性能优化措施已应用

### 部署前检查
- [ ] 部署配置已验证
- [ ] 域名和路由配置正确
- [ ] SEO标签完整准确
- [ ] 安全措施已实施
- [ ] 合规要求已满足

### 上线后验证
- [ ] 功能完整性验证通过
- [ ] 性能指标达到要求
- [ ] 兼容性测试通过
- [ ] 安全检查通过
- [ ] 用户体验符合预期

## 🔄 维护和更新约束

### 定期维护

**代码维护：**
- **依赖更新** - 定期更新项目依赖
- **安全补丁** - 及时应用安全更新
- **性能监控** - 定期检查性能指标
- **功能验证** - 定期验证功能完整性

**文档维护：**
- **约束更新** - 根据项目发展更新约束
- **经验记录** - 记录重要的经验教训
- **最佳实践** - 总结和分享最佳实践

### 版本管理

**版本控制：**
- **语义化版本** - 使用语义化版本号
- **变更记录** - 详细记录每次变更
- **标签管理** - 为重要版本创建标签
- **分支策略** - 建立合理的分支管理策略

---

**文档版本**：v1.0  
**创建日期**：[创建日期]  
**适用范围**：[项目名称] 项目  
**更新说明**：基于项目需求制定的约束文档

**维护信息**：
- **维护责任人**：[维护人员]
- **更新频率**：根据项目发展需要
- **审查机制**：定期审查约束的有效性
- **反馈渠道**：[反馈方式]

**使用提醒**：
- 本文档是项目开发的重要约束，所有团队成员必须遵守
- 定期回顾和更新约束内容，确保与项目实际情况同步
- 遇到约束冲突时，优先级：项目特定要求 > 通用约束 > 默认规则